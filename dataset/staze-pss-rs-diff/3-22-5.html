<html>
	<head>
		<meta charset="UTF-8"></meta>
		<title>a map</title>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.4/leaflet.css" crossorigin=""></link>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.4/leaflet.js" crossorigin=""></script>
		<script src="https://rowanwins.github.io/leaflet-simplestyle/dist/leaflet-simplestyle.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/perliedman-leaflet-control-geocoder/2.4.0/Control.Geocoder.min.js" crossorigin=""></script>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/perliedman-leaflet-control-geocoder/2.4.0/Control.Geocoder.min.css"></link>
		<style>
			::-webkit-scrollbar {display: none;}
			.content {white-space: nowrap;overflow: hidden;}
			.map {position: absolute; left: 0px; top: 0px; right: 0px; bottom: 0px; cursor: default;}
		</style>
	</head>
	<body>
		<div id="content" class="content">
			<map id="map" class="map"></map>
		</div>
		<script type="text/javascript">
			// utils
			var projectX = function(longitude) {
				return Math.floor((longitude / 360 + 0.5) * Math.pow(2, 24))
			}
			var projectY = function(latitude) {
				const sin = Math.sin(latitude * Math.PI / 180);
				const y2 = 0.5 - 0.25 * Math.log((1 + sin) / (1 - sin)) / Math.PI;
				const y3 = y2 < 0 ? 0 : y2 > 1 ? 1 : y2;
				return Math.floor(y3 * Math.pow(2, 24))
			}

			var projectedLocationToWord = function(x, y) {
				var key =''
				for (var i = 24; i >= 2; i -= 2) {
					var xUpper = (x & (1 << (i - 1))) != 0 ? 2 : 0
					var xLower = (x & (1 << (i - 2))) != 0 ? 1 : 0
					var yUpper = (y & (1 << (i - 1))) != 0 ? 2 : 0
					var yLower = (y & (1 << (i - 2))) != 0 ? 1 : 0
					var index = xUpper + xLower + (yUpper  + yLower) * 4
					key = key + String.fromCharCode(97 + index).toUpperCase()
				}
				return key
			}

			var BingLayer = L.TileLayer.extend({
				getTileUrl: function (tilePoint) {
					return L.Util.template(
						this._url,
						{q: this._quadKey(tilePoint.x, tilePoint.y, this._getZoomForUrl())});
					},
					_quadKey: function (x, y, z) {
						var quadKey = []
						for (var i = z; i > 0; i--) {
							var digit = '0'
							var mask = 1 << (i - 1)
							if ((x & mask) != 0) {
								digit++
							}
							if ((y & mask) != 0) {
								digit++
								digit++
							}
							quadKey.push(digit)
						}
						return quadKey.join('')
					}
			})

			var TileBoundsLayer = L.GridLayer.extend({
				initialize: function(options) {
					L.GridLayer.prototype.initialize.call(this, options)
					this._color = options.color
				},

				createTile: function(coords) {
					var key = coords.z + '/' + coords.x + '/' + coords.y

					var tile = L.DomUtil.create('canvas', 'leaflet-tile')
					var size = this.getTileSize()
					tile.width = size.x
					tile.height = size.y
					var ctx = tile.getContext('2d')

					ctx.strokeStyle = this._color
					ctx.fillStyle = this._color
					ctx.font = '15px Arial'
					ctx.lineWidth = 1
					ctx.beginPath()
					ctx.rect(0, 0, 255, 255)
					ctx.fillText(key, 5, 20)
					ctx.stroke()

					return tile
				}
			})

			var map = L.map('map', {maxBoundsViscosity: 1.0})
			map.setMaxBounds ([[-90,-180],[90,180]])
			L.control.scale({imperial: false}).addTo(map)
			var layers = L.control.layers()
			layers.addTo(map)
			new L.Control.Geocoder({
				geocoder: L.Control.Geocoder.nominatim(),
				defaultMarkGeocode: false}).on(
					'markgeocode',
					function(e) {
						var bbox = e.geocode.bbox
						var poly = L.polygon([
							bbox.getSouthEast(),
							bbox.getNorthEast(),
							bbox.getNorthWest(),
							bbox.getSouthWest()])
						map.fitBounds(poly.getBounds())
					}).addTo(map)

			var defaultBounds = null

			var mousedownInterval;
			map.on(
				'mousedown',
				function (e) {
					mousedownInterval = setInterval(
						function() {
							let longitude = Number (e.latlng.lng).toFixed (5)
							let latitude = Number (e.latlng.lat).toFixed (5)
							let zoom = map.getZoom()
							L
								.popup({closeOnClick: false})
								.setLatLng(e.latlng)
								.setContent(
									longitude + ', ' + latitude + '<br/>' + 
									projectedLocationToWord(projectX(longitude), projectY(latitude)) + '<br/>' + 
									'<a href="http://openstreetmap.org/#map=16/' + e.latlng.lat + '/' + e.latlng.lng + '" target="_blank">osm</a></br>' + 
									'<a href="https://preview.ideditor.com/release/#map=16/' + e.latlng.lat + '/' + e.latlng.lng + '" target="_blank">iD</a></br>' + 
									'<a href="http://localhost:8080/#map=16/' + e.latlng.lat + '/' + e.latlng.lng + '" target="_blank">iD (localhost)</a></br>' + 
									'<a href="https://www.mapillary.com/app/?focus=map&z=16&lat=' + e.latlng.lat + '&lng=' + e.latlng.lng + '" target="_blank">mapillary</a></br>' + 
									'<a href="https://kartaview.org/map/@' + e.latlng.lat + ',' + e.latlng.lng + ',16z" target="_blank">kartaview</a></br>' + 
									'<a href="https://www.google.com/maps/@' + e.latlng.lat + ',' + e.latlng.lng + ',16z" target="_blank">google maps</a></br>' 
									)
								.openOn(map)},
						500)})
			map.on(
				'mousemove',
				function(e) { clearInterval(mousedownInterval) })
			map.on(
				'mouseup',
				function(e) { clearInterval(mousedownInterval) })


			var layer5061 = L.tileLayer(
				'https://tile.openstreetmap.org/{z}/{x}/{y}.png',
				{
					attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
					maxZoom: 21,
					bounds: [[-90,-180],[90,180]],
					noWrap: true
				})
			layer5061.addTo(map)
			layers.addBaseLayer(layer5061, 'osm tile')

			var layer5062 = new BingLayer(
				'http://ecn.t3.tiles.virtualearth.net/tiles/a{q}.jpeg?g=1',
				{
					attribution: '&copy; Bing Maps',
					maxZoom: 21,
					bounds: [[-90,-180],[90,180]],
					noWrap: true
				})
			layers.addBaseLayer(layer5062, 'bing satellite')

			var layer5063 = L.geoJSON(
				{"type":"Feature","properties":{"stroke":"#FF0000","ref":"3-22-5","name":"Дивчибаре центар - Планинарски дом „На Пољанама”","osm-relation-id":14281022,"stroke-width":2,"operator":"Magleš PSD","website":"https:\/\/pss.rs\/terenipp\/divcibare-centar-planinarski-dom-na-poljanama\/","network":"rwn","distance":"5.9 km"},"geometry":{"type":"MultiLineString","coordinates":[[[19.9929875,44.1058114],[19.9927996,44.1054465],[19.992649,44.1052929],[19.991675100000002,44.1047547]],[[19.9944841,44.106543200000004],[19.9943564,44.1064905],[19.994232,44.106439200000004],[19.993604400000002,44.105969300000005],[19.9933289,44.1058619],[19.993228900000002,44.1058229],[19.9929875,44.1058114]],[[19.9952691,44.1065909],[19.9952459,44.1065914],[19.9944841,44.106543200000004]],[[19.995382300000003,44.106588300000006],[19.9952691,44.1065909]],[[19.996806900000003,44.106439200000004],[19.996613800000002,44.106381500000005],[19.995718,44.1064893],[19.995498,44.1065856],[19.995382300000003,44.106588300000006]],[[19.996921,44.106664300000006],[19.996806900000003,44.106439200000004]],[[19.996921,44.106664300000006],[19.9970913,44.1070841],[19.997351000000002,44.107417500000004],[19.9975656,44.1075407],[19.9982714,44.107818200000004]],[[19.999158100000002,44.1115323],[19.9989527,44.1101716],[19.9990546,44.1094013],[19.9990455,44.108841000000005],[19.9990224,44.1086656],[19.9988508,44.108234200000005],[19.998766500000002,44.108152800000006],[19.9985557,44.1079492],[19.9982714,44.107818200000004]],[[19.9992015,44.1118674],[19.999158100000002,44.1115323]],[[20.003281700000002,44.1137506],[20.003256800000003,44.1137059],[20.003231800000002,44.1136732],[20.0031919,44.1136342],[20.0031544,44.1135889],[20.003094700000002,44.113518600000006],[20.002993500000002,44.1134319],[20.0028647,44.1133474],[20.002679,44.113275800000004],[20.002339000000003,44.1131778],[20.002077500000002,44.1130536],[20.000960300000003,44.1124171],[20.0006331,44.112236],[19.9998378,44.1119125],[19.999634,44.111858600000005],[19.9992015,44.1118674]],[[20.003281700000002,44.1137506],[20.003324900000003,44.113768300000004],[20.003353800000003,44.1137882],[20.0033828,44.1138106],[20.003401500000002,44.1138313],[20.003413600000002,44.1138532],[20.003420900000002,44.113882600000004]],[[20.006221500000002,44.114150300000006],[20.0061196,44.1141445],[20.005980100000002,44.114127200000006],[20.0058326,44.1141291],[20.005669,44.1141195],[20.0054491,44.1141233],[20.0052854,44.114125300000005],[20.0051138,44.114127200000006],[20.0049582,44.1141657],[20.0047678,44.114208100000006],[20.0045827,44.1142581],[20.0043708,44.1142697],[20.0041777,44.114242700000005],[20.0039497,44.1142331],[20.003772700000003,44.114217700000005],[20.003665400000003,44.1141561],[20.003635900000003,44.114067500000004],[20.003593000000002,44.1139712],[20.003420900000002,44.113882600000004]],[[20.0090979,44.113814700000006],[20.0090647,44.1137498],[20.0090244,44.113678500000006],[20.0089869,44.113597600000006],[20.0089064,44.1135206],[20.008793800000003,44.1134879],[20.0086623,44.113551400000006],[20.0085014,44.1135321],[20.0082895,44.113526400000005],[20.008176900000002,44.1135187],[20.0080132,44.1134859],[20.0079086,44.113516700000005],[20.007809400000003,44.113537900000004],[20.0078014,44.113607300000005],[20.0077263,44.113676600000005],[20.007602900000002,44.113745900000005],[20.0074741,44.1138075],[20.007313200000002,44.1138557],[20.007203200000003,44.113848000000004],[20.0070637,44.113792100000005],[20.0069591,44.1137305],[20.0068223,44.113678500000006],[20.006717700000003,44.1136284],[20.0066105,44.113653500000005],[20.0064871,44.113745900000005],[20.006390500000002,44.113815200000005],[20.0063503,44.1139134],[20.006296600000002,44.1140059],[20.0062752,44.114081000000006],[20.006221500000002,44.114150300000006]],[[20.0087435,44.114540700000006],[20.0088018,44.1144873],[20.008826000000003,44.1143852],[20.008871600000003,44.1142832],[20.0089145,44.114183000000004],[20.0090003,44.1140521],[20.0090539,44.1139693],[20.0090995,44.1138903],[20.0090979,44.113814700000006]],[[20.0118917,44.1161954],[20.011746900000002,44.1161838],[20.011645,44.1160991],[20.0115269,44.115979700000004],[20.011392800000003,44.115910400000004],[20.0112373,44.115833300000006],[20.0110227,44.1157294],[20.0108564,44.115613800000006],[20.010674,44.1155522],[20.0104702,44.1154829],[20.010309200000002,44.115348100000006],[20.0100839,44.1152711],[20.0098962,44.115194],[20.0097299,44.1151131],[20.009585,44.1150092],[20.0093865,44.114955200000004],[20.009188100000003,44.1148012],[20.009021800000003,44.1147165],[20.0088934,44.1146228],[20.0087435,44.114540700000006]],[[20.0174011,44.1140909],[20.017208500000002,44.1140787],[20.0168384,44.114148],[20.0168009,44.114294400000006],[20.0166614,44.1144523],[20.0163395,44.114571700000006],[20.016082,44.1146448],[20.015819200000003,44.114691],[20.0155241,44.1148066],[20.015320300000003,44.114848900000005],[20.015202300000002,44.114949100000004],[20.0150091,44.1149799],[20.0147248,44.115033800000006],[20.0144217,44.1150723],[20.014121300000003,44.115053100000004],[20.013804800000003,44.1150916],[20.013520500000002,44.1151494],[20.0132094,44.1151185],[20.0129056,44.1151555],[20.012632,44.1152017],[20.0124067,44.115313400000005],[20.0122672,44.115452100000006],[20.012181400000003,44.1155753],[20.012202900000002,44.1157332],[20.012117,44.115898800000004],[20.012031200000003,44.1160452],[20.0118917,44.1161954]],[[20.021435500000003,44.114558300000006],[20.0212314,44.1144575],[20.0208805,44.114375100000004],[20.0207108,44.114369800000006],[20.020426500000003,44.114366000000004],[20.020077800000003,44.1144161],[20.0196487,44.114473800000006],[20.019219500000002,44.114473800000006],[20.018897600000003,44.1144161],[20.0184655,44.1144266],[20.0182875,44.1144157],[20.018090400000002,44.114362400000005],[20.0177416,44.1141753],[20.0174011,44.1140909]],[[20.0235863,44.1155004],[20.0235394,44.1153611],[20.023449600000003,44.1152492],[20.023159500000002,44.115056800000005],[20.022963700000002,44.114920600000005],[20.022732100000002,44.114825700000004],[20.022436300000003,44.1147586],[20.021936500000002,44.114694],[20.0216253,44.114634900000006],[20.021435500000003,44.114558300000006]],[[20.0236428,44.1166986],[20.023552000000002,44.1166726],[20.023498800000002,44.116613900000004],[20.0233765,44.116440700000005],[20.0233144,44.1162913],[20.0232999,44.116148800000005],[20.023342900000003,44.1159735],[20.023476900000002,44.115772],[20.0235843,44.115588900000006],[20.0235863,44.1155004]],[[20.022788600000002,44.1179761],[20.0229457,44.1179269],[20.023085100000003,44.1178833],[20.0231916,44.117799500000004],[20.023247400000002,44.1177104],[20.0234223,44.117466500000006],[20.023549000000003,44.117266400000005],[20.023645300000002,44.1170753],[20.0236656,44.1168843],[20.0236428,44.1166986]],[[20.019872900000003,44.1195108],[20.020243800000003,44.119500900000006],[20.020634100000002,44.1194245],[20.0209028,44.1192207],[20.0211715,44.118915],[20.0215415,44.1186166],[20.0217798,44.1183837],[20.021972400000003,44.118216200000006],[20.022256300000002,44.1181071],[20.0224844,44.118012400000005],[20.0225884,44.1179797],[20.022788600000002,44.1179761]],[[20.0215938,44.121022700000005],[20.0211989,44.1204867],[20.020813200000003,44.120118500000004],[20.0201187,44.119691700000004],[20.019872900000003,44.1195108]],[[20.0215938,44.121022700000005],[20.021537900000002,44.1211348],[20.021470100000002,44.1211758],[20.0209583,44.121485400000005],[20.0205674,44.1217005],[20.0201506,44.1221821],[20.0200594,44.1225001],[20.020020300000002,44.1226544],[20.0199356,44.122752600000005],[20.0198809,44.1228471],[20.019727200000002,44.123112600000006],[20.0194341,44.123280900000005],[20.0189391,44.123524],[20.0186981,44.1236316],[20.018548300000003,44.1237999],[20.0184897,44.124005600000004],[20.0186069,44.124375],[20.0187567,44.124650900000006],[20.019193100000003,44.1249875],[20.0193429,44.125286700000004],[20.019584700000003,44.125542800000005]],[[20.018548300000003,44.1269044],[20.0187546,44.1269186],[20.0191087,44.126907],[20.0194574,44.1268377],[20.0196451,44.1267299],[20.0196764,44.126677400000005],[20.0197739,44.126514300000004],[20.0198919,44.1262832],[20.0199241,44.1260637],[20.0198329,44.125855800000004],[20.019731,44.125674800000006],[20.019584700000003,44.125542800000005]],[[20.0157345,44.1278675],[20.0163568,44.127417400000006],[20.016587700000002,44.1272504],[20.0168339,44.1271542],[20.0170502,44.1271008],[20.017538700000003,44.127012],[20.0179295,44.1268997],[20.018287700000002,44.1268717],[20.018548300000003,44.1269044]],[[20.0137012,44.1292892],[20.013770100000002,44.1292443],[20.013990800000002,44.1290752],[20.0140512,44.129038900000005],[20.014114000000003,44.1289961],[20.014200300000002,44.128931800000004],[20.0143862,44.1287886],[20.0157345,44.1278675]]]}},
				{
					style: {
						color: "#00FF00",
						weight: 16
				}})
			layer5063.addTo(map)
			layers.addOverlay(layer5063, 'original')
			defaultBounds = layer5063.getBounds()


			var layer5064 = L.geoJSON(
				{"type":"Feature","properties":{"stroke":"#FF0000","ref":"3-22-5","name":"Дивчибаре центар - Планинарски дом „На Пољанама”","osm-relation-id":14281022,"stroke-width":2,"operator":"Magleš PSD","website":"https:\/\/pss.rs\/terenipp\/divcibare-centar-planinarski-dom-na-poljanama\/","network":"rwn","distance":"5.9 km"},"geometry":{"type":"MultiLineString","coordinates":[[[19.9929875,44.1058114],[19.9927996,44.1054465],[19.992649,44.1052929],[19.991675100000002,44.1047547]],[[19.9944841,44.106543200000004],[19.9943564,44.1064905],[19.994232,44.106439200000004],[19.993604400000002,44.105969300000005],[19.9933289,44.1058619],[19.993228900000002,44.1058229],[19.9929875,44.1058114]],[[19.9952691,44.1065909],[19.9952459,44.1065914],[19.9944841,44.106543200000004]],[[19.995382300000003,44.106588300000006],[19.9952691,44.1065909]],[[19.996806900000003,44.106439200000004],[19.996613800000002,44.106381500000005],[19.995718,44.1064893],[19.995498,44.1065856],[19.995382300000003,44.106588300000006]],[[19.996921,44.106664300000006],[19.996806900000003,44.106439200000004]],[[19.996921,44.106664300000006],[19.9970913,44.1070841],[19.997351000000002,44.107417500000004],[19.9975656,44.1075407],[19.9982714,44.107818200000004]],[[19.999158100000002,44.1115323],[19.9989527,44.1101716],[19.9990546,44.1094013],[19.9990455,44.108841000000005],[19.9990224,44.1086656],[19.9988508,44.108234200000005],[19.998766500000002,44.108152800000006],[19.9985557,44.1079492],[19.9982714,44.107818200000004]],[[19.9992015,44.1118674],[19.999158100000002,44.1115323]],[[20.003281700000002,44.1137506],[20.003256800000003,44.1137059],[20.003231800000002,44.1136732],[20.0031919,44.1136342],[20.0031544,44.1135889],[20.003094700000002,44.113518600000006],[20.002993500000002,44.1134319],[20.0028647,44.1133474],[20.002679,44.113275800000004],[20.002339000000003,44.1131778],[20.002077500000002,44.1130536],[20.000960300000003,44.1124171],[20.0006331,44.112236],[19.9998378,44.1119125],[19.999634,44.111858600000005],[19.9992015,44.1118674]],[[20.003281700000002,44.1137506],[20.003324900000003,44.113768300000004],[20.003353800000003,44.1137882],[20.0033828,44.1138106],[20.003401500000002,44.1138313],[20.003413600000002,44.1138532],[20.003420900000002,44.113882600000004]],[[20.0054491,44.1141233],[20.0052854,44.114125300000005],[20.0051138,44.114127200000006],[20.0049582,44.1141657],[20.0047678,44.114208100000006],[20.0045827,44.1142581],[20.0043708,44.1142697],[20.0041777,44.114242700000005],[20.0039497,44.1142331],[20.003772700000003,44.114217700000005],[20.003665400000003,44.1141561],[20.003635900000003,44.114067500000004],[20.003593000000002,44.1139712],[20.003420900000002,44.113882600000004]],[[20.0090979,44.113814700000006],[20.0090647,44.1137498],[20.0090244,44.113678500000006],[20.0089869,44.113597600000006],[20.0089064,44.1135206],[20.008793800000003,44.1134879],[20.0086623,44.113551400000006],[20.0085014,44.1135321],[20.0082895,44.113526400000005],[20.008176900000002,44.1135187],[20.008135900000003,44.113510500000004],[20.0080132,44.1134859],[20.0079086,44.113516700000005],[20.007809400000003,44.113537900000004],[20.0078014,44.113607300000005],[20.0078421,44.113732600000006],[20.007839,44.113835],[20.007797800000002,44.1139237],[20.0077028,44.1140829],[20.007585600000002,44.1141488],[20.007519000000002,44.1142216],[20.007382800000002,44.114251200000005],[20.0072656,44.114258],[20.007154800000002,44.114251200000005],[20.007021700000003,44.1142284],[20.0068443,44.114242100000006],[20.0066321,44.1142443],[20.006442,44.114269400000005],[20.0063743,44.114274],[20.006242500000003,44.114283],[20.0060682,44.1142807],[20.005909900000002,44.114235300000004],[20.005742,44.1141875],[20.0054491,44.1141233]],[[20.0087435,44.114540700000006],[20.0088018,44.1144873],[20.008826000000003,44.1143852],[20.008871600000003,44.1142832],[20.0089145,44.114183000000004],[20.0090003,44.1140521],[20.0090539,44.1139693],[20.0090995,44.1138903],[20.0090979,44.113814700000006]],[[20.0118917,44.1161954],[20.011746900000002,44.1161838],[20.011645,44.1160991],[20.0115269,44.115979700000004],[20.011392800000003,44.115910400000004],[20.0112373,44.115833300000006],[20.0110227,44.1157294],[20.0108564,44.115613800000006],[20.010674,44.1155522],[20.0104702,44.1154829],[20.010309200000002,44.115348100000006],[20.0100839,44.1152711],[20.0098962,44.115194],[20.0097299,44.1151131],[20.009585,44.1150092],[20.0093865,44.114955200000004],[20.009188100000003,44.1148012],[20.009021800000003,44.1147165],[20.0088934,44.1146228],[20.0087435,44.114540700000006]],[[20.0174011,44.1140909],[20.017208500000002,44.1140787],[20.0168384,44.114148],[20.0168009,44.114294400000006],[20.0166614,44.1144523],[20.0163395,44.114571700000006],[20.016082,44.1146448],[20.015819200000003,44.114691],[20.0155241,44.1148066],[20.015320300000003,44.114848900000005],[20.015202300000002,44.114949100000004],[20.0150091,44.1149799],[20.0147248,44.115033800000006],[20.0144217,44.1150723],[20.014121300000003,44.115053100000004],[20.013804800000003,44.1150916],[20.013520500000002,44.1151494],[20.0132094,44.1151185],[20.0129056,44.1151555],[20.012632,44.1152017],[20.0124067,44.115313400000005],[20.0122672,44.115452100000006],[20.012181400000003,44.1155753],[20.012202900000002,44.1157332],[20.012117,44.115898800000004],[20.012031200000003,44.1160452],[20.0118917,44.1161954]],[[20.021435500000003,44.114558300000006],[20.0212314,44.1144575],[20.0208805,44.114375100000004],[20.0207108,44.114369800000006],[20.020426500000003,44.114366000000004],[20.020077800000003,44.1144161],[20.0196487,44.114473800000006],[20.019219500000002,44.114473800000006],[20.018897600000003,44.1144161],[20.0184655,44.1144266],[20.0182875,44.1144157],[20.018090400000002,44.114362400000005],[20.0177416,44.1141753],[20.0174011,44.1140909]],[[20.0235863,44.1155004],[20.0235394,44.1153611],[20.023449600000003,44.1152492],[20.023159500000002,44.115056800000005],[20.022963700000002,44.114920600000005],[20.022732100000002,44.114825700000004],[20.022436300000003,44.1147586],[20.021936500000002,44.114694],[20.0216253,44.114634900000006],[20.021435500000003,44.114558300000006]],[[20.0236428,44.1166986],[20.023552000000002,44.1166726],[20.023498800000002,44.116613900000004],[20.0233765,44.116440700000005],[20.0233144,44.1162913],[20.0232999,44.116148800000005],[20.023342900000003,44.1159735],[20.023476900000002,44.115772],[20.0235843,44.115588900000006],[20.0235863,44.1155004]],[[20.022788600000002,44.1179761],[20.0229457,44.1179269],[20.023085100000003,44.1178833],[20.0231916,44.117799500000004],[20.023247400000002,44.1177104],[20.0234223,44.117466500000006],[20.023549000000003,44.117266400000005],[20.023645300000002,44.1170753],[20.0236656,44.1168843],[20.0236428,44.1166986]],[[20.019872900000003,44.1195108],[20.020243800000003,44.119500900000006],[20.020634100000002,44.1194245],[20.0209028,44.1192207],[20.0211715,44.118915],[20.0215415,44.1186166],[20.0217798,44.1183837],[20.021972400000003,44.118216200000006],[20.022256300000002,44.1181071],[20.0224844,44.118012400000005],[20.0225884,44.1179797],[20.022788600000002,44.1179761]],[[20.0215938,44.121022700000005],[20.0211989,44.1204867],[20.020813200000003,44.120118500000004],[20.0201187,44.119691700000004],[20.019872900000003,44.1195108]],[[20.0215938,44.121022700000005],[20.0215567,44.121073200000005],[20.0214594,44.1211354],[20.0210748,44.121407700000006],[20.0209583,44.121485400000005],[20.0208114,44.121574900000006]],[[20.0208114,44.121574900000006],[20.0205848,44.1217246],[20.0201506,44.1221821],[20.0200594,44.1225001],[20.020020300000002,44.1226544],[20.0199356,44.122752600000005],[20.0198809,44.1228471],[20.019727200000002,44.123112600000006],[20.0193617,44.1232963],[20.0189391,44.123524],[20.0186981,44.1236316],[20.018548300000003,44.1237999],[20.0184897,44.124005600000004],[20.0186069,44.124375],[20.0187567,44.124650900000006],[20.019193100000003,44.1249875],[20.0193429,44.125286700000004],[20.019584700000003,44.125542800000005]],[[20.018548300000003,44.1269044],[20.0187546,44.1269186],[20.0191087,44.126907],[20.0194574,44.1268377],[20.0196451,44.1267299],[20.0196764,44.126677400000005],[20.0197739,44.126514300000004],[20.0198919,44.1262832],[20.0199241,44.1260637],[20.0198329,44.125855800000004],[20.019731,44.125674800000006],[20.019584700000003,44.125542800000005]],[[20.0157345,44.1278675],[20.0163568,44.127417400000006],[20.016587700000002,44.1272504],[20.0168339,44.1271542],[20.0170502,44.1271008],[20.017538700000003,44.127012],[20.0179295,44.1268997],[20.018287700000002,44.1268717],[20.018548300000003,44.1269044]],[[20.0137012,44.1292892],[20.013770100000002,44.1292443],[20.013990800000002,44.1290752],[20.0140512,44.129038900000005],[20.014114000000003,44.1289961],[20.014200300000002,44.128931800000004],[20.0143862,44.1287886],[20.0157345,44.1278675]]]}},
				{
					style: {
						color: "#FF0000",
						weight: 8
				}})
			layer5064.addTo(map)
			layers.addOverlay(layer5064, 'new')
			defaultBounds = layer5064.getBounds()


			var layer5065 = L.geoJSON(
				{"type":"FeatureCollection","features":[{"type":"Feature","properties":{"stroke":"#0000FF","stroke-width":2},"geometry":{"type":"LineString","coordinates":[[19.99166803434491,44.10475197248161],[19.99202703125775,44.104933021590114],[19.992364989593625,44.105129996314645],[19.992606975138187,44.10527600906789],[19.992757011204958,44.105387991294265],[19.992875028401613,44.10561899654567],[19.992992961779237,44.10582301206887],[19.993245005607605,44.10582703538239],[19.9934109672904,44.105881014838815],[19.993733000010252,44.106054017320275],[19.99400700442493,44.1062739584595],[19.994231974706054,44.106461964547634],[19.994323002174497,44.10653597675264],[19.994640005752444,44.10656598396599],[19.995005037635565,44.10658601671457],[19.99538498930633,44.10658199340105],[19.99562102369964,44.10651200450957],[19.99583099037409,44.106461964547634],[19.99609401449561,44.10645098425448],[19.99635100364685,44.106419971212745],[19.996618973091245,44.10640496760607],[19.996786024421453,44.10645098425448],[19.996967995539308,44.10673596896231],[19.997075032442808,44.106975020840764],[19.997215010225773,44.10722102969885],[19.997498989105225,44.10750199109316],[19.99774600379169,44.107602993026376],[19.9980459921062,44.1076950263232],[19.998395014554262,44.1078139655292],[19.9986469745636,44.10797598771751],[19.998807990923524,44.108138009905815],[19.998962972313166,44.1083649918437],[19.999067997559905,44.10866498015821],[19.99910001643002,44.109020037576556],[19.999073026701808,44.10942396149039],[19.999002031981945,44.10989200696349],[19.998954003676772,44.110114965587854],[19.99903396703303,44.11063497886062],[19.999088030308485,44.111123979091644],[19.999177968129516,44.11153896711767],[19.999232031404972,44.11182797513902],[19.999536965042353,44.11182797513902],[19.999815998598933,44.111873991787434],[20.00027800910175,44.112067027017474],[20.00075502321124,44.11226701922715],[20.001108990982175,44.112501963973045],[20.001521967351437,44.11274797283113],[20.001791026443243,44.11293698474765],[20.002138959243894,44.11308702081442],[20.0024719722569,44.113225992769],[20.00279400497675,44.11332598887384],[20.003018975257874,44.113468984141946],[20.00314202159643,44.11360301077366],[20.003428012132645,44.11365296691656],[20.00355198048055,44.11378397606313],[20.003577964380383,44.113941974937916],[20.00369598157704,44.114153031259775],[20.003777034580708,44.11422695964575],[20.004195040091872,44.11423400044441],[20.004608016461134,44.11424598656595],[20.004929965361953,44.11415001377463],[20.005230959504843,44.114087987691164],[20.005852980539203,44.11410299129784],[20.00621197745204,44.11412302404642],[20.00634097494185,44.113876009359956],[20.006415992975235,44.11377601325512],[20.00653401017189,44.11367199383676],[20.006689997389913,44.11360996775329],[20.00689895823598,44.113680040463805],[20.00707103870809,44.11379504017532],[20.007364992052317,44.11382898688316],[20.007578982040286,44.113721027970314],[20.007729018107057,44.11365497857332],[20.007836977019906,44.11351701244712],[20.00808298587799,44.113465966656804],[20.00837903469801,44.11347401328385],[20.008711041882634,44.113485999405384],[20.008926037698984,44.11352002993226],[20.009054029360414,44.11367098800838],[20.009102979674935,44.113852037116885],[20.008969958871603,44.114135010167956],[20.008820006623864,44.114434998482466],[20.008777007460594,44.114631973207],[20.009404979646206,44.114931961521506],[20.00975903123617,44.11512499675155],[20.010181982070208,44.11532901227474],[20.010428996756673,44.115487011149526],[20.010864017531276,44.115667976439],[20.011170962825418,44.115832010284066],[20.011509004980326,44.11601297557354],[20.01168603077531,44.1161169949919],[20.01177202910185,44.11618296056986],[20.011938996613026,44.11618296056986],[20.012023989111185,44.11605203524232],[20.01209900714457,44.11588598974049],[20.012152986600995,44.11572799086571],[20.012211995199323,44.11550100892782],[20.012324983254075,44.11535097286105],[20.012479964643717,44.11523496732116],[20.01274298876524,44.115143017843366],[20.01315101981163,44.115103958174586],[20.0134530197829,44.11513698287308],[20.013761976733804,44.115101024508476],[20.01398803666234,44.11504302173853],[20.01430998556316,44.1150619648397],[20.014519030228257,44.11504696123302],[20.014749029651284,44.11502701230347],[20.01510500907898,44.11498200148344],[20.01532000489533,44.11489399150014],[20.01547498628497,44.11480103619397],[20.01577598042786,44.11472400650382],[20.016080997884274,44.114631973207],[20.01631200313568,44.11455100402236],[20.01648399978876,44.114519990980625],[20.016649961471558,44.1144660115242],[20.016767978668213,44.114388981834054],[20.016816006973386,44.114284962415695],[20.016859006136656,44.114130986854434],[20.01712203025818,44.11409301683307],[20.0173800252378,44.11406200379133],[20.017700968310237,44.11417298018932],[20.017947982996702,44.11429703235626],[20.018280996009707,44.11440398544073],[20.018570004031062,44.11444296129048],[20.01884400844574,44.11442401818931],[20.019236030057073,44.11448202095926],[20.019607013091445,44.114499958232045],[20.019883029162884,44.114458970725536],[20.02020196057856,44.11440700292587],[20.020550983026624,44.11438403651118],[20.02088299021125,44.11441898904741],[20.02114098519087,44.11446902900934],[20.02138196490705,44.114542035385966],[20.021516997367144,44.11461898125708],[20.021827965974808,44.114672960713506],[20.0222359970212,44.11471897736192],[20.02260597422719,44.114800030365586],[20.022921971976757,44.11486901342869],[20.023152977228165,44.115034975111485],[20.023308964446187,44.115165984258056],[20.02348599024117,44.11530403420329],[20.0235500279814,44.11547301337123],[20.023495964705944,44.11566998809576],[20.02338297665119,44.11588196642697],[20.023287003859878,44.116109032183886],[20.023287003859878,44.11630902439356],[20.023414995521307,44.116540029644966],[20.023603001609445,44.11676701158285],[20.0236380379647,44.11698100157082],[20.02357299439609,44.11717697046697],[20.02340200357139,44.11745499819517],[20.023217014968395,44.117744006216526],[20.023063961416483,44.117870992049575],[20.02288701944053,44.11790896207094],[20.02258602529764,44.117954978719354],[20.02223800867796,44.11812102422118],[20.02189996652305,44.11826301366091],[20.0217230245471,44.118428975343704],[20.021407026797533,44.11869099363685],[20.021084994077682,44.118990981951356],[20.020837979391217,44.119248976930976],[20.02064502798021,44.11942600272596],[20.020489962771535,44.11945098079741],[20.02028100192547,44.11947101354599],[20.020060976967216,44.11949004046619],[20.019845981150866,44.11949004046619],[20.020146975293756,44.119697995483875],[20.020376974716783,44.11986001767218],[20.020634969696403,44.120040982961655],[20.020891958847642,44.120233012363315],[20.021170992404222,44.12048002704978],[20.021348018199205,44.12070298567414],[20.021514985710382,44.12091303616762],[20.021584974601865,44.12101697176695],[20.021537030115724,44.12110900506377],[20.02131700515747,44.12123599089682],[20.020940992981195,44.12147495895624],[20.02058199606836,44.12172599695623],[20.020330036059022,44.12198399193585],[20.020147981122136,44.12223796360195],[20.02002401277423,44.12261196412146],[20.020013032481074,44.12276200018823],[20.01987900584936,44.12288102321327],[20.019755037501454,44.12306601181626],[20.0195299834013,44.12318604066968],[20.019235024228692,44.12331696599722],[20.018880972638726,44.1235130187124],[20.01867201179266,44.12364796735346],[20.018553994596004,44.123823987320065],[20.018485011532903,44.12395901978016],[20.018557012081146,44.124125987291336],[20.01860504038632,44.124337965622544],[20.01876102760434,44.12458104081452],[20.018926989287138,44.124745996668935],[20.01916302368045,44.12493500858545],[20.019285986199975,44.125088984146714],[20.01942403614521,44.125329963862896],[20.01959603279829,44.1255300398916],[20.019778003916144,44.12566096521914],[20.019913036376238,44.12587998434901],[20.01996098086238,44.12607695907354],[20.019885962828994,44.12626496516168],[20.01976802945137,44.126489013433456],[20.01965998671949,44.12666997872293],[20.019568959251046,44.126742985099554],[20.019311970099807,44.126830995082855],[20.01899496652186,44.126873994246125],[20.0185870192945,44.126873994246125],[20.01835098490119,44.12683501839638],[20.01811201684177,44.1268390417099],[20.01774698495865,44.12692797370255],[20.017499970272183,44.126984970644116],[20.01714600250125,44.12705797702074],[20.016749035567045,44.12715503945947],[20.016582990065217,44.12720499560237],[20.016443012282252,44.12731999531388],[20.016238996759057,44.1274899803102],[20.015982007607818,44.12767798639834],[20.01581504009664,44.12780296057463],[20.015714038163424,44.127862975001335],[20.01568696461618,44.12788803689182],[20.015504993498325,44.128012005239725],[20.015273988246918,44.128165980800986],[20.015006018802524,44.128374019637704],[20.014647021889687,44.12860795855522],[20.01441601663828,44.128762017935514],[20.014217030256987,44.128912976011634],[20.013984013348818,44.129065023735166],[20.01379600726068,44.129172982648015],[20.013715960085392,44.12925001233816]]}},{"type":"Feature","properties":{"title":"<div style='text-align:center;vertical-align:middle;line-height:20px;font-size: 10px;background-color: #00FF00'><span style='color:white'>0<\/span><\/div>"},"geometry":{"type":"Point","coordinates":[19.99166803434491,44.10475197248161]}},{"type":"Feature","properties":{"title":"<div style='text-align:center;vertical-align:middle;line-height:20px;font-size: 10px;background-color: #00FF00'><span style='color:white'>1<\/span><\/div>"},"geometry":{"type":"Point","coordinates":[20.01315101981163,44.115103958174586]}},{"type":"Feature","properties":{"title":"<div style='text-align:center;vertical-align:middle;line-height:20px;font-size: 10px;background-color: #00FF00'><span style='color:white'>2<\/span><\/div>"},"geometry":{"type":"Point","coordinates":[20.01996098086238,44.12607695907354]}}]},
				{
					style: {
						color: "#0000FF",
						weight: 4
				}})
			layer5065.addTo(map)
			layers.addOverlay(layer5065, 'source gpx')
			defaultBounds = layer5065.getBounds()


			var params = new URLSearchParams(window.location.search)
			if (params.get('marker')) {
				var splits = params.get('marker').split(',')
				map.setView([parseFloat(splits[1]), parseFloat(splits[0])], 18)
				L.marker([parseFloat(splits[1]), parseFloat(splits[0])]).addTo(map)
			}

			if (window.location.hash) {
				var splits = window.location.hash.substring(5).split('/')
				map.setView([parseFloat(splits[2]), parseFloat(splits[1])], parseInt(splits[0]))
			} else {
				if (defaultBounds != null) { 
					map.fitBounds(defaultBounds, null)
				} else {
					map.setView([44.82763029742812, 20.50529479980469], 10)
				}
			}

			window.onhashchange = function() {
				var splits = window.location.hash.substring(5).split('/')
				map.setView([parseFloat(splits[2]), parseFloat(splits[1])], parseInt(splits[0]))
			}
			map.on(
				'moveend',
				function() {
					window.location.hash = '#map=' + map.getZoom() + '/' + map.getCenter().lng + '/' + map.getCenter().lat
				})

		</script>
	</body>
</html>
